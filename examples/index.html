<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="zend-mvc: MVC application provider">  
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Examples - zend-mvc</title>

    <link rel="stylesheet" href="../css/styles-e3f3751b65.css">
</head>
<body id="page-top">

    
    <div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">

            
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="../img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">

            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>

            
            
                <div class="nav navbar-nav navbar-collapse visible-xs-block ">
                    <div class="subnavigation hidden-print">
    <h4 class="subnavigation__title">
        <a href="..">zend-mvc</a>
    </h4>

    <h5 class="subnavigation__subtitle">Table of Contents</h5>

    <ul class="subnavigation__list">
        
            
                <li class="subnavigation__list-item ">
                    <a href=".." class="subnavigation__link">zend-mvc</a>
                </li>
            
        
            
                <li class="subnavigation__list-item ">
                    <a href="../intro/" class="subnavigation__link">Introduction</a>
                </li>
            
        
            
                <li class="subnavigation__list-item ">
                    <a href="../quick-start/" class="subnavigation__link">Quick Start</a>
                </li>
            
        
            
                <li class="subnavigation__list-item">
                    <span class="subnavigation__headline">Reference</span>
                    <ul class="subnavigation__list">
                        
                            
    <li class="subnavigation__list-item ">
        <a href="../services/" class="subnavigation__link">Default Services</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../routing/" class="subnavigation__link">Routing</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../mvc-event/" class="subnavigation__link">The MVC Event</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../send-response-event/" class="subnavigation__link">The SendResponse Event</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../controllers/" class="subnavigation__link">Available Controllers</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../plugins/" class="subnavigation__link">Controller Plugins</a>
    </li>

                        
                            
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Examples</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../middleware/" class="subnavigation__link">Dispatching PSR-7 Middleware</a>
    </li>

                        
                            
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Migration</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../migration/" class="subnavigation__link">Migration Overview</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../migration/to-v2-7/" class="subnavigation__link">v2.X to v2.7</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../migration/to-v3-0/" class="subnavigation__link">v2.X to v3.0</a>
    </li>

            
        </ul>
    </li>

                        
                    </ul>
                </li>
            
        
            
                <li class="subnavigation__list-item">
                    <span class="subnavigation__headline">Cookbook</span>
                    <ul class="subnavigation__list">
                        
                            
    <li class="subnavigation__list-item ">
        <a href="../cookbook/automating-controller-factories/" class="subnavigation__link">Automating controller factories</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../cookbook/middleware-in-listeners/" class="subnavigation__link">Using middleware within event listeners</a>
    </li>

                        
                    </ul>
                </li>
            
        
    </ul>
</div>
                </div>
            

            
            <div class="nav navbar-nav navbar-collapse visible-xs-block">
                <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</div>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation

                    
                        <small class="header__subtitle">zend-mvc</small>
                    
                </h1>
            </div>

            
            <div class="col-xs-4 text-right">
                
                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/zendframework/zend-mvc/" class="header__link header__link--github" title="Go to repository of zend-mvc">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-xs-12 content" role="main">
            <!-- content:begin -->
                
                    <ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
  <li><a href="https://framework.zend.com/">Home</a></li>
  <li><a href="https://docs.zendframework.com/">Docs</a></li>
  <li><a href="..">zend-mvc</a></li>
  
    
      
        <li>Reference</li>
      
    
  
  <li class="active">Examples</li>
</ol>


    
    

    
    
        <div class="toc">
            <h6 class="toc__headline">In This Article</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#controllers" class="toc__link">Controllers</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#bootstrapping" class="toc__link">Bootstrapping</a>
                    </li>
                
            </ul>
        </div>
    


    <h1 id="examples">Examples</h1>
<h2 id="controllers">Controllers</h2>
<h3 id="accessing-the-request-and-response">Accessing the Request and Response</h3>
<p>When using one of the abstract controller implementations, the request and
response object are composed directly into the controller as soon as
<code>dispatch()</code> is called. You may access them as follows:</p>
<pre class="codehilite"><code class="language-php">// Using explicit accessor methods
$request  = $this-&gt;getRequest();
$response = $this-&gt;getResponse();

// Using direct property access
$request  = $this-&gt;request;
$response = $this-&gt;response;</code></pre>

<p>Additionally, if your controller implements <code>InjectApplicationEventInterface</code>
(as all shipped abstract controllers do), you can access these objects from the
attached <code>MvcEvent</code>:</p>
<pre class="codehilite"><code class="language-php">$event    = $this-&gt;getEvent();
$request  = $event-&gt;getRequest();
$response = $event-&gt;getResponse();</code></pre>

<p>The above can be useful when composing event listeners into your controller.</p>
<h3 id="accessing-routing-parameters">Accessing routing parameters</h3>
<p>The parameters returned when routing completes are wrapped in a
<code>Zend\Router\RouteMatch</code> object.  This object is detailed in the section on
<a href="../routing/">Routing</a>.</p>
<p>Within your controller, if you implement <code>InjectApplicationEventInterface</code> (as
all shipped abstract controllers do), you can access this object from the
attached <code>MvcEvent</code>:</p>
<pre class="codehilite"><code class="language-php">$event   = $this-&gt;getEvent();
$matches = $event-&gt;getRouteMatch();</code></pre>

<p>Once you have the <code>RouteMatch</code> object, you can pull parameters from it.</p>
<p>The same can be done using the <a href="../plugins/#params-plugin">Params plugin</a>.</p>
<h3 id="returning-early">Returning early</h3>
<p>You can short-circuit execution of the application at any point by returning a
<code>Response</code> from your controller or any event. When such a value is discovered,
it halts further execution of the event manager, bubbling up to the
<code>Application</code> instance, where it is immediately returned.</p>
<p>As an example, the <code>Redirect</code> plugin returns a <code>Response</code>, which can be returned
immediately so as to complete the request as quickly as possible. Other use
cases might be for returning JSON or XML results from web service endpoints,
returning "401 Unauthorized" results, etc.</p>
<h2 id="bootstrapping">Bootstrapping</h2>
<h3 id="registering-module-specific-listeners">Registering module-specific listeners</h3>
<p>You may want module-specific listeners; these allow you to introduce
authorization, logging, caching, or other concerns into your application.</p>
<p>Each <code>Module</code> class can have an optional <code>onBootstrap()</code> method. This method is
used for module-specific configuration, and is the ideal location to setup event
listeners for you module. The <code>onBootstrap()</code> method is called for <strong>every</strong>
module on <strong>every</strong> page request and should <strong>only</strong> be used for performing
<strong>lightweight</strong> tasks such as registering event listeners.</p>
<p>The base <code>Application</code> class shipped with the framework has an <code>EventManager</code>
associated with it, and once the modules are initialized, it triggers the
<a href="../mvc-event/#mvceventevent_bootstrap-bootstrap">bootstrap</a> event, which
provides a <code>getApplication()</code> method on the event.</p>
<p>One way to accomplish module-specific listeners is to listen to that event, and
register listeners at that time. As an example:</p>
<pre class="codehilite"><code class="language-php">namespace SomeCustomModule;

class Module
{
    /**
     * @param  \Zend\Mvc\MvcEvent $e The MvcEvent instance
     * @return void
     */
    public function onBootstrap($e)
    {
        $application = $e-&gt;getApplication();
        $config      = $application-&gt;getConfig();
        $view        = $application-&gt;getServiceManager()-&gt;get('ViewHelperManager');
        // You must have these keys in you application config
        $view-&gt;headTitle($config['view']['base_title']);

        // This is your custom listener
        $listener   = new Listeners\ViewListener();
        $listener-&gt;setView($view);
        $listener-&gt;attach($application-&gt;getEventManager());
    }
}</code></pre>

<p>The above demonstrates several things. First, it demonstrates a listener on the
application's <a href="../mvc-event/#mvceventevent_bootstrap-bootstrap">bootstrap</a> event
(the <code>onBootstrap()</code> method). Second, it demonstrates that listener, and how it
can be used to register listeners with the application. It grabs the
<code>Application</code> instance; from the <code>Application</code>, it is able to grab the attached
service manager and configuration. These are then used to retrieve the view,
configure some helpers, and then register a listener aggregate with the
application event manager.</p>



    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../plugins/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
                <a rel="next" class="page-nav__link page-nav__link--next" href="../middleware/">
                    Next <i class="fa fa-chevron-right"></i>
                </a>
            
        </li>
    </ul>
</nav>


<div class="help-wanted">
    <p>
        Found a mistake or want to contribute to the documentation?
        <a href="https://github.com/zendframework/zend-mvc/edit/master/docs/book/examples.md" target="_blank" class="help-wanted__link">
            Edit this page on GitHub!
        </a>
    </p>
</div>
                
            <!-- content:end -->
            </div>
            <div class="col-md-3 col-xs-12 sidebar">
                
                    <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    <div class="subnavigation hidden-print">
    <h4 class="subnavigation__title">
        <a href="..">zend-mvc</a>
    </h4>

    <h5 class="subnavigation__subtitle">Table of Contents</h5>

    <ul class="subnavigation__list">
        
            
                <li class="subnavigation__list-item ">
                    <a href=".." class="subnavigation__link">zend-mvc</a>
                </li>
            
        
            
                <li class="subnavigation__list-item ">
                    <a href="../intro/" class="subnavigation__link">Introduction</a>
                </li>
            
        
            
                <li class="subnavigation__list-item ">
                    <a href="../quick-start/" class="subnavigation__link">Quick Start</a>
                </li>
            
        
            
                <li class="subnavigation__list-item">
                    <span class="subnavigation__headline">Reference</span>
                    <ul class="subnavigation__list">
                        
                            
    <li class="subnavigation__list-item ">
        <a href="../services/" class="subnavigation__link">Default Services</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../routing/" class="subnavigation__link">Routing</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../mvc-event/" class="subnavigation__link">The MVC Event</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../send-response-event/" class="subnavigation__link">The SendResponse Event</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../controllers/" class="subnavigation__link">Available Controllers</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../plugins/" class="subnavigation__link">Controller Plugins</a>
    </li>

                        
                            
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Examples</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../middleware/" class="subnavigation__link">Dispatching PSR-7 Middleware</a>
    </li>

                        
                            
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Migration</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../migration/" class="subnavigation__link">Migration Overview</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../migration/to-v2-7/" class="subnavigation__link">v2.X to v2.7</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../migration/to-v3-0/" class="subnavigation__link">v2.X to v3.0</a>
    </li>

            
        </ul>
    </li>

                        
                    </ul>
                </li>
            
        
            
                <li class="subnavigation__list-item">
                    <span class="subnavigation__headline">Cookbook</span>
                    <ul class="subnavigation__list">
                        
                            
    <li class="subnavigation__list-item ">
        <a href="../cookbook/automating-controller-factories/" class="subnavigation__link">Automating controller factories</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../cookbook/middleware-in-listeners/" class="subnavigation__link">Using middleware within event listeners</a>
    </li>

                        
                    </ul>
                </li>
            
        
    </ul>
</div>
                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">

            
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>&copy; 2006-2018 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.zendframework.com" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://zendframework-slack.herokuapp.com" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script>
        var base_url = '..',
            siteName = 'zend-mvc';
    </script>
    <script src="../js/scripts-dcbafde59f.js"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>



</body>


</html>
